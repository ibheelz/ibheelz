<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ibheelz</title>
    <link rel="icon" href="images/ibheelz.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                fontFamily: {
                    sans: ['Jost', 'sans-serif']
                }
            }
        }
    </script>
    <style>
        @keyframes floatUp {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        .animate-float {
            animation: floatUp 4s ease-in-out infinite;
        }
    </style>
</head>
<body class="min-h-screen w-screen bg-black flex items-center justify-center text-white">
    <div class="px-5">
        <div class="max-w-xl text-center">
            <!-- Logo -->
            <div class="flex justify-center mb-10">
                <img src="images/ibheelz.png" alt="ibheelz logo" class="w-48 h-48 object-contain" />
            </div>

            <!-- Heading -->
            <h1 class="text-5xl md:text-6xl font-bold mb-5 tracking-tight">Under Construction</h1>

            <!-- Description -->
            <p class="text-lg text-gray-300 mb-10 leading-relaxed">We're building something amazing. Check back soon for updates.</p>


            <!-- Footer -->
            <div class="mt-16 pt-7 border-t border-gray-800 text-gray-400 text-sm">
                <p>Â© 2026 ibheelz. All rights reserved.</p>
            </div>
        </div>
    </div>

    <script>
        console.log('=== ibheelz Visitor Tracking Started ===');

        // Discord webhook notification on page visit
        const DISCORD_WEBHOOK_URL = 'https://discord.com/api/webhooks/1462158804400734249/pGQRfaIOm7qPBfgqtFET2Ynz5x33l4hGPhvxaMJ0p-90JIS0gRlA1WxDF2NIvx223aIL';
        console.log('Discord Webhook Configured:', !!DISCORD_WEBHOOK_URL);

        function getReferrerSource(referrer) {
            if (!referrer || referrer === 'Direct Visit') return 'Direct Visit';

            const referrerLower = referrer.toLowerCase();

            // Twitter/X detection - check t.co FIRST and RETURN immediately
            if (referrerLower.includes('t.co')) return 'Twitter';
            if (referrerLower.includes('twitter.com')) return 'Twitter';
            if (referrerLower.includes('x.com')) return 'X (Twitter)';

            if (referrerLower.includes('instagram.com')) return 'Instagram';
            if (referrerLower.includes('facebook.com') || referrerLower.includes('fb.com')) return 'Facebook';
            if (referrerLower.includes('linkedin.com')) return 'LinkedIn';
            if (referrerLower.includes('tiktok.com')) return 'TikTok';
            if (referrerLower.includes('youtube.com') || referrerLower.includes('youtu.be')) return 'YouTube';
            if (referrerLower.includes('reddit.com')) return 'Reddit';
            if (referrerLower.includes('github.com')) return 'GitHub';
            if (referrerLower.includes('google')) return 'Google';
            if (referrerLower.includes('bing')) return 'Bing';
            if (referrerLower.includes('duckduckgo')) return 'DuckDuckGo';
            if (referrerLower.includes('discord')) return 'Discord';
            if (referrerLower.includes('t.me')) return 'Telegram';
            if (referrerLower.includes('whatsapp')) return 'WhatsApp';

            return 'Direct Visit';
        }

        async function sendDiscordNotification() {
            // Use sessionStorage to ensure only one notification per session
            if (sessionStorage.getItem('notificationSent')) {
                console.log('Notification already sent in this session, skipping...');
                return;
            }
            console.log('Setting notification flag...');
            sessionStorage.setItem('notificationSent', 'true');

            const timestamp = new Date().toLocaleString();
            const userAgent = navigator.userAgent;
            const referrerUrl = document.referrer || 'Direct Visit';
            const referrerSource = getReferrerSource(referrerUrl);

            // Track visit count and last visit
            let visitCount = 1;
            let lastVisit = 'First visit';

            try {
                const visitData = JSON.parse(localStorage.getItem('ibheelzVisits') || '{"count": 0, "lastVisit": null}');
                lastVisit = visitData.lastVisit ? `${visitData.lastVisit}` : 'First visit';
                visitCount = visitData.count + 1;
                localStorage.setItem('ibheelzVisits', JSON.stringify({
                    count: visitCount,
                    lastVisit: timestamp
                }));
            } catch (err) {
                localStorage.setItem('ibheelzVisits', JSON.stringify({
                    count: 1,
                    lastVisit: timestamp
                }));
            }

            // Get comprehensive geolocation and network info
            let geoInfo = {
                city: 'Unknown',
                country: 'Unknown',
                ip: 'Unknown',
                isp: 'Unknown',
                org: 'Unknown',
                timezone: 'Unknown',
                region: 'Unknown'
            };

            try {
                const controller = new AbortController();
                const timeout = setTimeout(() => controller.abort(), 3000); // 3 second timeout

                // Try with minimal fields first
                const response = await fetch('https://ip-api.com/json/?fields=city,country,ip', {
                    signal: controller.signal
                });
                clearTimeout(timeout);

                if (response.ok) {
                    const data = await response.json();
                    if (data && data.status === 'success') {
                        geoInfo = {
                            city: data.city || 'Unknown',
                            country: data.country || 'Unknown',
                            region: 'N/A',
                            ip: data.ip || 'Unknown',
                            isp: 'N/A',
                            org: 'N/A',
                            timezone: 'N/A',
                            coordinates: 'N/A'
                        };
                    }
                }
            } catch (err) {
                console.log('Geolocation fetch error (non-critical):', err.message);
                geoInfo.city = 'Unknown';
                geoInfo.country = 'Unknown';
                geoInfo.ip = 'Unknown';
            }

            const payload = {
                content: 'ðŸ”” New visitor to ibheelz.com',
                embeds: [
                    {
                        color: 0xFFFFFF,
                        fields: [
                            {
                                name: 'â° Time',
                                value: timestamp,
                                inline: false
                            },
                            {
                                name: 'ðŸ“Š Visit Count',
                                value: `${visitCount} visit${visitCount > 1 ? 's' : ''}`,
                                inline: true
                            },
                            {
                                name: 'ðŸ• Last Visit',
                                value: lastVisit,
                                inline: true
                            },
                            {
                                name: 'ðŸŒ Location',
                                value: `${geoInfo.city}, ${geoInfo.region}, ${geoInfo.country}`,
                                inline: false
                            },
                            {
                                name: 'ðŸ“ Coordinates',
                                value: geoInfo.coordinates,
                                inline: false
                            },
                            {
                                name: 'ðŸ”— Source',
                                value: referrerSource,
                                inline: false
                            },
                            {
                                name: 'ðŸŒ IP Address',
                                value: geoInfo.ip,
                                inline: false
                            },
                            {
                                name: 'ðŸ¢ ISP',
                                value: geoInfo.isp,
                                inline: false
                            },
                            {
                                name: 'ðŸ­ Organization',
                                value: geoInfo.org,
                                inline: false
                            },
                            {
                                name: 'â±ï¸ Timezone',
                                value: geoInfo.timezone,
                                inline: false
                            },
                            {
                                name: 'ðŸ“± Browser',
                                value: userAgent.substring(0, 150),
                                inline: false
                            }
                        ]
                    }
                ]
            };

            // Only send if webhook URL is configured
            if (DISCORD_WEBHOOK_URL && DISCORD_WEBHOOK_URL !== 'YOUR_DISCORD_WEBHOOK_URL_HERE') {
                console.log('Sending Discord notification...');
                console.log('Payload:', JSON.stringify(payload, null, 2));

                fetch(DISCORD_WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                })
                .then(response => {
                    console.log('Discord response status:', response.status);
                    if (response.status === 204) {
                        console.log('âœ… Discord notification sent successfully!');
                    } else {
                        console.error('âŒ Discord returned status:', response.status);
                        return response.text().then(text => {
                            console.error('Discord error response:', text);
                        });
                    }
                })
                .catch(err => {
                    console.error('âŒ Discord notification error:', err.message);
                });
            } else {
                console.warn('Discord webhook not configured');
            }
        }

        // Send notification immediately with a small delay
        console.log('Visitor tracking script loaded');
        setTimeout(() => {
            console.log('Attempting to send notification...');
            sendDiscordNotification();
        }, 500);
    </script>
</body>
</html>
